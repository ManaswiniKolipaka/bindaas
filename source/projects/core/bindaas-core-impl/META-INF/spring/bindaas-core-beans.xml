<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

<!-- Management Task Bean -->

<bean id="managementTask" class="edu.emory.cci.bindaas.core.impl.ManagementTasksImpl" init-method="init">
	<property name="providerRegistry" ref="providerRegistry"></property>
	<property name="persistenceDriver" ref="fileSystemPersistenceDriver"></property>
	<property name="validator" ref="validator"></property>
</bean>

<!-- Execution Task Bean -->

<bean id="executionTask" class="edu.emory.cci.bindaas.core.impl.ExecutionTaskImpl">
	<property name="providerRegistry" ref="providerRegistry"></property>
	<property name="validator" ref="validator"></property>
	<property name="modifierRegistry" ref="modifierRegistry"></property>
</bean>



<!-- Provider Registry Bean -->
<bean id="providerRegistry" class="edu.emory.cci.bindaas.core.impl.ProviderRegistryImpl" init-method="init" />
	
<!-- Validator Bean -->
<bean id="validator" class="edu.emory.cci.bindaas.core.impl.ValidatorImpl" >
	<property name="modifierRegistry" ref="modifierRegistry"></property>
</bean>

<!-- FileSystem Persistence Driver -->
<bean id="fileSystemPersistenceDriver" class="edu.emory.cci.bindaas.core.impl.FileSystemPersistenceDriverImpl" init-method="init">
	<property name="metadataStore" value="bindaas-metadata"></property>
</bean>

<!-- Modifier Registry Bean -->
<bean id="modifierRegistry" class="edu.emory.cci.bindaas.core.impl.ModifierRegistryImpl" init-method="init" />

<!-- Service Beans -->

<bean id="managementService" class="edu.emory.cci.bindaas.core.rest.service.impl.ManagementServiceImpl" init-method="init" >
	<property name="managementTask" ref="managementTask"></property>
</bean>

<bean id="executionService" class="edu.emory.cci.bindaas.core.rest.service.impl.ExecutionServiceImpl" init-method="init" >
	<property name="managementTask" ref="managementTask"></property>
	<property name="executionTask" ref="executionTask"></property>
</bean>

<bean id="informationService" class="edu.emory.cci.bindaas.core.rest.service.impl.InformationServiceImpl"  >
	<property name="modifierRegistry" ref="modifierRegistry"></property>
	<property name="providerRegistry" ref="providerRegistry"></property>
</bean>


<!-- Security Handlers -->

<bean id="securityHandler" class="edu.emory.cci.bindaas.core.rest.security.SecurityHandler" init-method="init" >

</bean>

<bean id="auditLogger" class="edu.emory.cci.bindaas.core.rest.security.AuditInLogger" >
</bean>

<!-- Bindaas Initializer -->

<bean id="defaultBindaasConfiguration" class="edu.emory.cci.bindaas.core.config.BindaasConfiguration">
	<property name="host" value="localhost"></property>
	<property name="port" value="9099"></property>
	<property name="protocol" value="http"></property>
	<property name="enableAuthentication" value="true"></property>
	<property name="authenticationProviderClass" value="edu.emory.cci.bindaas.security.impl.DBAuthenticationProvider"></property>
	<property name="enableAuthorization" value="false"></property>
	<property name="authorizationProviderClass" value="edu.emory.cci.bindaas.security.impl.FileSystemAuthorizationProvider"></property>
	<property name="enableAudit" value="true"></property>
	<property name="auditProviderClass" value="edu.emory.cci.bindaas.security.impl.FileSystemAuditProvider"></property>
	
</bean>
<bean id="bindaasInitializer" class="edu.emory.cci.bindaas.core.bundle.BindaasInitializer" init-method="init" >
	<property name="auditModule" ref="auditLogger"></property>
	
	<property name="defaultBindaasConfiguration" ref="defaultBindaasConfiguration">
		
	</property>
	<!-- property name="defaultBindaasProperties" >
		<props>
			<prop key="host">localhost</prop>
			<prop key="port">9099</prop>
			<prop key="protocol">http</prop>
			<prop key="authentication.status">false</prop>
			<prop key="authentication.provider.class">edu.emory.cci.bindaas.security.impl.DBAuthenticationProvider</prop> 
			<prop key="authorization.status">false</prop>
			<prop key="authorization.provider.class">edu.emory.cci.bindaas.security.impl.FileSystemAuthorizationProvider</prop>
			<prop key="audit.status">false</prop>
			<prop key="audit.provider.class">edu.emory.cci.bindaas.security.impl.FileSystemAuditProvider</prop>
			<prop key="service.ui.url">http://127.0.0.1:8080</prop>
			<prop key="webconsole.security.admin">admin</prop>
			<prop key="webconsole.security.userRegistration.notification.enable">true</prop>
			<prop key="webconsole.security.userRegistration.notification.recepient">admin@mycompany.org</prop>
			<prop key="webconsole.security.method">default</prop> 
			
		</props>
	
	</property -->
	
	<property name="executionService" ref="executionService"></property>
	<property name="managementService" ref="managementService"></property>
	<property name="informationService" ref="informationService"></property>
	
	<property name="securityModule" ref="securityHandler"></property>
	
</bean>



</beans>




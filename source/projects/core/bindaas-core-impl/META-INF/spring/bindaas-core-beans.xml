<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

<!-- Management Task Bean -->

<bean id="managementTask" class="edu.emory.cci.bindaas.core.impl.ManagementTasksImpl" init-method="init">
	<property name="providerRegistry" ref="providerRegistry"></property>
	<property name="persistenceDriver" ref="fileSystemPersistenceDriver"></property>
	<property name="validator" ref="validator"></property>
</bean>

<!-- Execution Task Bean -->

<bean id="executionTask" class="edu.emory.cci.bindaas.core.impl.ExecutionTaskImpl">
	<property name="managementTask" ref="managementTask"></property>
	<property name="providerRegistry" ref="providerRegistry"></property>
	<property name="validator" ref="validator"></property>
	<property name="modifierRegistry" ref="modifierRegistry"></property>
</bean>



<!-- Provider Registry Bean -->
<bean id="providerRegistry" class="edu.emory.cci.bindaas.core.impl.ProviderRegistryImpl" init-method="init" />
	
<!-- Validator Bean -->
<bean id="validator" class="edu.emory.cci.bindaas.core.impl.ValidatorImpl" />

<!-- FileSystem Persistence Driver -->
<bean id="fileSystemPersistenceDriver" class="edu.emory.cci.bindaas.core.impl.FileSystemPersistenceDriverImpl" init-method="init">
	<property name="metadataStore" value="bindaas-metadata"></property>
</bean>

<!-- Modifier Registry Bean -->
<bean id="modifierRegistry" class="edu.emory.cci.bindaas.core.impl.ModifierRegistryImpl" init-method="init" />

<!-- Service Beans -->

<bean id="managementService" class="edu.emory.cci.bindaas.core.rest.service.impl.ManagementServiceImpl" init-method="init" >
	<property name="managementTask" ref="managementTask"></property>
</bean>

<bean id="executionService" class="edu.emory.cci.bindaas.core.rest.service.impl.ExecutionServiceImpl" init-method="init" >
	<property name="managementTask" ref="managementTask"></property>
	<property name="executionTask" ref="executionTask"></property>
</bean>

<bean id="informationService" class="edu.emory.cci.bindaas.core.rest.service.impl.InformationServiceImpl"  >
	<property name="modifierRegistry" ref="modifierRegistry"></property>
	<property name="providerRegistry" ref="providerRegistry"></property>
</bean>


<!-- Security Handlers -->

<bean id="securityHandler" class="edu.emory.cci.bindaas.core.rest.security.SecurityHandler" init-method="init" >
	<property name="authenticationProps">
		<props>
			<prop key="admin" >password</prop>
		</props>
	</property>
	
	<property name="authorizationProps">
		<props>
			<prop key="user.admin" >admin</prop>
			<prop key="user.nadir" >admin</prop>
			<prop key="resource.http://localhost" >admin</prop>
		</props>
	</property>
	
</bean>

<bean id="auditLogger" class="edu.emory.cci.bindaas.core.rest.security.AuditInLogger" >
	<property name="auditProviderProps">
		<props>
			<prop key="audit.file">audit.data</prop>
		</props>
	</property>
</bean>

<!-- Bindaas Initializer -->

<bean id="bindaasInitializer" class="edu.emory.cci.bindaas.core.bundle.BindaasInitializer" init-method="init" >
	<property name="auditModule" ref="auditLogger"></property>
	<property name="bindaasAuditPropsFileName" value="bindaas.audit.properties"></property>
	<property name="bindaasAuthenticationPropsFileName" value="bindaas.authentication.properties"></property>
	<property name="bindaasAuthorizationPropsFileName" value="bindaas.authorization.properties"></property>
	<property name="bindaasPropertyFileName" value="bindaas.properties"></property>
	
	<property name="bindaasProperties" >
		<props>
			<prop key="host">localhost</prop>
			<prop key="port">9099</prop>
			<prop key="protocol">http</prop>
			<prop key="authentication.status">false</prop>
			<prop key="authentication.provider.class">edu.emory.cci.bindaas.security.impl.FileSystemAuthenticationProvider</prop> <!--  Set correct providers -->
			<prop key="authorization.status">false</prop>
			<prop key="authorization.provider.class">edu.emory.cci.bindaas.security.impl.FileSystemAuthorizationProvider</prop>
			<prop key="audit.status">false</prop>
			<prop key="audit.provider.class">edu.emory.cci.bindaas.security.impl.FileSystemAuditProvider</prop>
			
		
		</props>
	
	</property>
	
	<property name="executionService" ref="executionService"></property>
	<property name="managementService" ref="managementService"></property>
	<property name="informationService" ref="informationService"></property>
	
	<property name="securityModule" ref="securityHandler"></property>
	
</bean>



</beans>



